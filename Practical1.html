<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SPRT2002 Prac Book - 1&nbsp; Practical 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="include/webex.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Practical1.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Practical 1</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">SPRT2002 Prac Book</a> 
        <div class="sidebar-tools-main">
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./SPRT2002-Prac-Book.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./SPRT2002-Prac-Book.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Practical1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Practical 1</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#learning-outcome" id="toc-learning-outcome" class="nav-link active" data-scroll-target="#learning-outcome"><span class="header-section-number">1.1</span> Learning Outcome:</a>
  <ul class="collapse">
  <li><a href="#assessments" id="toc-assessments" class="nav-link" data-scroll-target="#assessments"><span class="header-section-number">1.1.1</span> <u><strong><em>Assessments</em></strong></u><strong><em>:</em></strong></a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background"><span class="header-section-number">1.1.2</span> <u><strong><em>Background</em></strong></u><strong><em>:</em></strong></a></li>
  </ul></li>
  <li><a href="#practical-procedures-part-1" id="toc-practical-procedures-part-1" class="nav-link" data-scroll-target="#practical-procedures-part-1"><span class="header-section-number">1.2</span> <u><strong><em>Practical Procedures (PART 1)</em></strong></u><strong><em>:</em></strong></a>
  <ul class="collapse">
  <li><a href="#broad-jump" id="toc-broad-jump" class="nav-link" data-scroll-target="#broad-jump"><span class="header-section-number">1.2.1</span> Broad Jump</a></li>
  <li><a href="#max-speed-assessment" id="toc-max-speed-assessment" class="nav-link" data-scroll-target="#max-speed-assessment"><span class="header-section-number">1.2.2</span> <strong><em>Max speed assessment</em></strong></a></li>
  <li><a href="#drop-jump-assessment" id="toc-drop-jump-assessment" class="nav-link" data-scroll-target="#drop-jump-assessment"><span class="header-section-number">1.2.3</span> <strong><em>Drop Jump assessment</em></strong></a></li>
  </ul></li>
  <li><a href="#practical-procedures-part-2" id="toc-practical-procedures-part-2" class="nav-link" data-scroll-target="#practical-procedures-part-2"><span class="header-section-number">1.3</span> <u><strong><em>Practical Procedures (PART 2):</em></strong></u></a></li>
  <li><a href="#descriptive-statistics-recap" id="toc-descriptive-statistics-recap" class="nav-link" data-scroll-target="#descriptive-statistics-recap"><span class="header-section-number">2</span> Descriptive statistics recap</a>
  <ul class="collapse">
  <li><a href="#fig1" id="toc-fig1" class="nav-link" data-scroll-target="#fig1"><span class="header-section-number">2.0.1</span> Fig1</a></li>
  <li><a href="#fig2" id="toc-fig2" class="nav-link" data-scroll-target="#fig2"><span class="header-section-number">2.0.2</span> Fig2</a></li>
  <li><a href="#reflection-1" id="toc-reflection-1" class="nav-link" data-scroll-target="#reflection-1"><span class="header-section-number">2.0.3</span> Reflection</a></li>
  <li><a href="#but-what-is-the-standard-error" id="toc-but-what-is-the-standard-error" class="nav-link" data-scroll-target="#but-what-is-the-standard-error"><span class="header-section-number">2.0.4</span> But what is the standard error?</a></li>
  <li><a href="#confidence-intervals" id="toc-confidence-intervals" class="nav-link" data-scroll-target="#confidence-intervals"><span class="header-section-number">2.0.5</span> Confidence intervals</a></li>
  <li><a href="#test-your-learning" id="toc-test-your-learning" class="nav-link" data-scroll-target="#test-your-learning"><span class="header-section-number">2.1</span> Test your learning</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Practical 1</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="learning-outcome" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="learning-outcome"><span class="header-section-number">1.1</span> Learning Outcome:</h2>
<ol type="1">
<li>Understand measurement accuracy concepts and their application to exercise testing and measurement</li>
<li>Evaluate the feasibility of different tests according to environmental conditions and client characteristics</li>
<li>Demonstrate basic data processing and analytical techniques for calculating distribution based statistics (Mean, Standard Deviation)</li>
</ol>
<section id="assessments" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="assessments"><span class="header-section-number">1.1.1</span> <u><strong><em>Assessments</em></strong></u><strong><em>:</em></strong></h3>
<p>This is the first of three lab weeks (weeks 2, 3 and 4) where the data you collect will be used for your first professional report assessment (1-page report). <em>HELPFUL TIP:</em> The more attention you pay to the quality of your data during this final lab, the better your report will be</p>
</section>
<section id="background" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="background"><span class="header-section-number">1.1.2</span> <u><strong><em>Background</em></strong></u><strong><em>:</em></strong></h3>
<p>Maximal sprinting speed and its derivate acceleration have both been shown to be key discriminators in playing status across many sports. Whilst, performing a maximal sprint test would give the most valid insight into these qualities, it may not always be possible to perform this test in a practical environment due factors such as, perceived risk of injury and cost of equipment (timing gates, radar gun etc). Hence, identifying cost effective test that may give insight into these qualities is of interest.</p>
<p>Two commonly used test that are used as both proxy measures of acceleration and sprinting speed respectively are the standing broad jump (SBJ) and assessment of lower limb stiffness. Whilst a number of techniques for measuring lower limb stiffness exist, the test we will focus on today is the drop jump test.</p>
<p>PART 1 of today will involve collecting data across a 0-10m sprint test, standing broad jump and drop jump test (look to get at least two trials across each test). Data collected from this will be uploaded on vUWS where we’ll then look do PART 2 aims of today which involve calculating basic summary statistics that represent the mean and spread/deviation of the data.</p>
</section>
</section>
<section id="practical-procedures-part-1" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="practical-procedures-part-1"><span class="header-section-number">1.2</span> <u><strong><em>Practical Procedures (PART 1)</em></strong></u><strong><em>:</em></strong></h2>
<section id="broad-jump" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="broad-jump"><span class="header-section-number">1.2.1</span> Broad Jump</h3>
<p>After completing a standardised warm-up administered by the tutor, you will complete a series of maximal effort horizontal jumps. The individual being tested needs to stand behind a marker on the ground, with their toes directly in line with the marker. They are then permitted to do a counter-movement before they jump. By this we mean that the individual is allowed to bend their knees and trunk and to swing their arms before take-off to help them generate power. The landing must be on both feet, and the effort should be repeated if the individual falls backwards or takes a step before take-off. The standard procedure is for a two-foot take off and landing, where distance between the toes and the first landing point (or heel-strike) identified by the assessor is recorded. Continue until everyone has completed all efforts. Be sure to record the maximal distance achieved.</p>
</section>
<section id="max-speed-assessment" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="max-speed-assessment"><span class="header-section-number">1.2.2</span> <strong><em>Max speed assessment</em></strong></h3>
<p>Data Collection: You will be required to gather into groups of 4 or 5, and establish a testing order within the group. After completing the standardised warm-up administered by the tutor, you will complete a pre-determined number of maximal sprint efforts over a 10m distance (with a timing gate at 5m also). Your times will be recorded automatically by electronic timing gates (Swift SpeedLight Timing<sup>TM</sup>&nbsp;Gates) as well as by your group members (handheld stopwatches). Be sure to record all times so that you are able to match each electronic timer score with those recorded by your peers with the stopwatch. Continue until everyone has completed all efforts.</p>
</section>
<section id="drop-jump-assessment" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="drop-jump-assessment"><span class="header-section-number">1.2.3</span> <strong><em>Drop Jump assessment</em></strong></h3>
<ol type="1">
<li><p>&nbsp;Stand on a box or elevated platform behind.</p></li>
<li><p>Place your hands on your hips.</p></li>
<li><p>Keep your chest up and look forward.</p></li>
<li><p>Step off the box; then.</p></li>
<li><p>Land on the plates with both feet at the same time;</p></li>
<li><p>Immediately jump as high as possible; then</p></li>
<li><p>Land softly, remaining completely still on the jump mat.</p></li>
<li><p>Record RSI from device</p></li>
</ol>
</section>
</section>
<section id="practical-procedures-part-2" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="practical-procedures-part-2"><span class="header-section-number">1.3</span> <u><strong><em>Practical Procedures (PART 2):</em></strong></u></h2>
<p><strong>REMEMBER</strong>: <strong>the data you collect today and over the previous week’s labs will be used for your first 1-page report…so be attentive and ask questions during PART 2 of the lab session!</strong></p>
<p>Use lecture material as a reference point to calculate mean and standard deviation of data collected. ( you may use excel functions but also have a go going step by step through calculations)</p>
<ul>
<li><p>Practice plotting data has a histogram.</p></li>
<li><p>Calculate the mean, sd and CV%</p></li>
<li><p>Calculate Z – Scores (Also outlined in lecture material)</p></li>
</ul>
<p><u><strong><em>Reflection Question:</em></strong></u></p>
<ol type="1">
<li>Why is important to understand how your data is distributed?<br>
</li>
<li>Why is the practical reason for us transforming numbers into a Zscore?<br>
</li>
<li>When trying to describe a distribution what are the most important components we would want to know?</li>
</ol>
</section>
<section id="descriptive-statistics-recap" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Descriptive statistics recap</h1>
<p>An essential component of being a sport and exercise scientist is the ability to summarise results collected from groups or individuals correctly. Luckily many of summary statistics that you will need are things that you would have covered in yr 8 and 10 mathematics. These are parameters such as <strong>mean, median, mode</strong>, <strong>standard deviation (SD)</strong> and <strong>coefficient of variation (CV%)</strong>.</p>
<p>An important aspect to remember is the idea of data we collect from a group we being considered a “sample” from the population. To help build your intuition around this, lets say i wanted to summarise the sprint test results collected from SPRT2002. Now lets say I only used one practical class sprint times to reflect the full cohort of SPRT2002. It would be reasonable for you to say that I am using a sample from the full cohort to represent the sprint capability. This situation effectively anytime we collect data from a group as there always some of the population of interest using missing from our sample.</p>
<p>The visual below allows you to randomly sample data from a distribution. Have a play around with both the sample size and population SD sliders and see what you notice.</p>
<section id="fig1" class="level3" data-number="2.0.1">
<h3 data-number="2.0.1" class="anchored" data-anchor-id="fig1"><span class="header-section-number">2.0.1</span> Fig1</h3>
<div class="viz-container">
  <div class="controls">
    <div class="slider-container">
      <label>Sample Size: <span id="sampleSizeVal">20</span></label>
      <input type="range" id="sampleSizeA" min="5" max="100" value="20" class="slider">
    </div>
    <div class="slider-container">
      <label>Population SD: <span id="sdVal">5</span></label>
      <input type="range" id="sdSlider" min="3" max="10" value="5" step="0.5" class="slider">
    </div>
    <div class="button-group">
      <button id="addSample">Add Samples</button>
      <button id="reset">Reset</button>
      <button id="downloadCSV">Download Data</button>
    </div>
  </div>
  <div id="visualization"></div>
</div>

<style>
.viz-container {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.controls {
  margin-bottom: 15px;
}

.slider-container {
  margin-bottom: 15px;
}

.slider {
  width: 200px;
  margin-top: 5px;
}

button {
  padding: 8px 16px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-right: 10px;
}

button:hover {
  background: #0056b3;
}

.point-range line {
  stroke: #666;
  stroke-width: 2;
}

.point-range circle {
  fill: #666;
}

.density-path {
  fill: #90EE90;
  opacity: 0.5;
  stroke: #228B22;
  stroke-width: 1.5;
}

.falling-point {
  fill: #32CD32;
  opacity: 0.7;
}

.mean-line {
  stroke: #666;
  stroke-width: 1;
  stroke-dasharray: 4;
}

.sd-line {
  stroke: #228B22;
  stroke-width: 1;
  stroke-dasharray: 4;
}

.button-group {
  display: flex;
  gap: 10px;
}

.annotation {
  font-size: 12px;
  fill: #666;
}

.annotation-box {
  fill: #fff;
  stroke: #ddd;
  rx: 4;
  ry: 4;
}
</style>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Set up dimensions
  const width = 600;
  const height = 400;
  const margin = {top: 20, right: 200, bottom: 40, left: 60};
  const plotWidth = width - margin.left - margin.right;
  const plotHeight = height - margin.top - margin.bottom;
  
  // Parameters for normal distribution
  const mu = 50;
  let sigma = 5;
  let samples = [];

  // Create SVG
  const svg = d3.select("#visualization")
    .append("svg")
    .attr("width", width)
    .attr("height", height);

  // Create plot group
  const g = svg.append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

  // Set up scales
  const x = d3.scaleLinear()
    .domain([0.08, 0])
    .range([0, plotWidth * 0.25]);

  const xPoints = d3.scaleLinear()
    .domain([0, 1])
    .range([plotWidth * 0.5, plotWidth * 0.55]);

  const y = d3.scaleLinear()
    //.domain([mu - 4*sigma, mu + 4*sigma])
    .domain([20,80])
    .range([plotHeight, 0]);

  // Add y-axis only
  g.append("g")
    .call(d3.axisLeft(y));

  // Add SD lines
  const sdLinesGroup = g.append("g")
    .attr("class", "sd-lines");

  function updateSDLines() {
    sdLinesGroup.selectAll(".sd-line").remove();
    
    // Add upper SD line
    sdLinesGroup.append("line")
      .attr("class", "sd-line")
      .attr("x1", 0)
      .attr("x2", plotWidth)
      .attr("y1", y(mu + sigma))
      .attr("y2", y(mu + sigma));

    // Add lower SD line
    sdLinesGroup.append("line")
      .attr("class", "sd-line")
      .attr("x1", 0)
      .attr("x2", plotWidth)
      .attr("y1", y(mu - sigma))
      .attr("y2", y(mu - sigma));
  }

  function updateVisualization() {
    // Update y scale
  //  y.domain([mu - 4*sigma, mu + 4*sigma]);
  //  g.select("g").call(d3.axisLeft(y));

    // Update density curve
    const curve = d3.range(mu - 4*sigma, mu + 4*sigma + 0.1, 0.1).map(x => ({
      x: normalDensity(x, mu, sigma),
      y: x
    }));

    g.select(".density-path").datum(curve).attr("d", line);
    
    // Update mean line
    g.select(".mean-line")
      .attr("y1", y(mu))
      .attr("y2", y(mu));

    // Update SD lines
    updateSDLines();

    // Update point range if samples exist
    if (samples.length > 0) {
      updatePointRange();
      updateAnnotations();
    }
  }

  // Function to calculate normal distribution
  function normalDensity(x, mu, sigma) {
    return (1 / (sigma * Math.sqrt(2 * Math.PI))) * 
           Math.exp(-0.5 * Math.pow((x - mu) / sigma, 2));
  }

  // Generate points for the density curve
  const curve = d3.range(mu - 4*sigma, mu + 4*sigma + 0.1, 0.1).map(x => ({
    x: normalDensity(x, mu, sigma),
    y: x
  }));

  // Draw the density curve
  const line = d3.line()
    .x(d => x(d.x))
    .y(d => y(d.y));

  g.append("path")
    .datum(curve)
    .attr("class", "density-path")
    .attr("d", line);

  // Add mean line
  g.append("line")
    .attr("class", "mean-line")
    .attr("x1", 0)
    .attr("x2", plotWidth)
    .attr("y1", y(mu))
    .attr("y2", y(mu));

  // Add initial SD lines
  updateSDLines();

  // Function to generate random normal value
  function randomNormal() {
    let u = 0, v = 0;
    while(u === 0) u = Math.random();
    while(v === 0) v = Math.random();
    return mu + sigma * Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
  }

  // Function to update annotations
  function updateAnnotations() {
    g.selectAll(".annotation").remove();
    g.selectAll(".annotation-box").remove();

    if (samples.length > 0) {
      const mean = d3.mean(samples);
      const sd = d3.deviation(samples);
      const min = d3.min(samples);
      const max = d3.max(samples);
      const range = max - min;
      const cv = (sd / mean) * 100;
      const median = d3.median(samples);
      // Mode approximation for continuous data
      const mode = d3.mode(samples.map(x => Math.round(x)));

      const annotations = [
        `Population Mean (μ) = ${mu}`,
        `Population SD (σ) = ${sigma}`,
        `Sample Mean (x̄) = ${mean.toFixed(1)}`,
        `Sample Median = ${median.toFixed(1)}`,
        `Sample Mode ≈ ${mode.toFixed(1)}`,
        `Sample SD (s) = ${sd.toFixed(1)}`,
        `Min = ${min.toFixed(1)}`,
        `Max = ${max.toFixed(1)}`,
        `Range = ${range.toFixed(1)}`,
        `CV% = ${cv.toFixed(1)}%`
      ];

      const boxPadding = 10;
      const lineHeight = 20;
      const boxHeight = annotations.length * lineHeight + 2 * boxPadding;
      
      g.append("rect")
        .attr("class", "annotation-box")
        .attr("x", plotWidth + 20)
        .attr("y", 0)
        .attr("width", 160)
        .attr("height", boxHeight);

      annotations.forEach((text, i) => {
        g.append("text")
          .attr("class", "annotation")
          .attr("x", plotWidth + 30)
          .attr("y", 20 + i * lineHeight)
          .text(text);
      });
    }
  }

  // Function to animate falling points
  function addFallingPoints() {
    const sampleSize = +document.getElementById("sampleSizeA").value;
    const newPoints = Array.from({length: sampleSize}, () => randomNormal());
    
    newPoints.forEach((value, i) => {
      const startX = x(normalDensity(value, mu, sigma));
      const endX = xPoints(Math.random());

      const point = g.append("circle")
        .attr("class", "falling-point")
        .attr("cx", startX)
        .attr("cy", y(value))
        .attr("r", 3);

      point.transition()
        .duration(500)
        .delay(i * 20)
        .attr("cx", endX)
        .on("end", function() {
          samples.push(value);
          if (i === newPoints.length - 1) {
            updatePointRange();
            updateAnnotations();
          }
        });
    });
  }

  // Function to update the point range
  function updatePointRange() {
    g.selectAll(".point-range").remove();

    if (samples.length > 0) {
      const mean = d3.mean(samples);
      const sd = d3.deviation(samples);

      const pointRange = g.append("g")
        .attr("class", "point-range")
        .attr("transform", `translate(${plotWidth * 0.45},0)`);

      pointRange.append("line")
        .attr("x1", 0)
        .attr("x2", 0)
        .attr("y1", y(mean - sd))
        .attr("y2", y(mean + sd));

      pointRange.append("circle")
        .attr("cx", 0)
        .attr("cy", y(mean))
        .attr("r", 4);
    }
  }
  
  function downloadCSV() {
    if (samples.length === 0) {
        alert("No data to download. Please add samples first.");
        return;
    }

    // Create CSV content
    const headers = "value\n";
    const csvContent = headers + samples.map(value => value.toFixed(4)).join("\n");

    // Create blob and download link
    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement("a");
    const url = URL.createObjectURL(blob);
    
    link.setAttribute("href", url);
    link.setAttribute("download", "sample_data.csv");
    link.style.visibility = 'hidden';
    
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

// Add this with your other event listeners
document.getElementById("downloadCSV").addEventListener("click", downloadCSV);

  // Add button handlers
  document.getElementById("addSample").addEventListener("click", addFallingPoints);
  
  document.getElementById("reset").addEventListener("click", function() {
    samples = [];
    g.selectAll(".falling-point").remove();
    g.selectAll(".point-range").remove();
    g.selectAll(".annotation").remove();
    g.selectAll(".annotation-box").remove();
  });

  // Add slider handlers
  document.getElementById("sampleSizeA").addEventListener("input", function() {
    document.getElementById("sampleSizeVal").textContent = this.value;
  });

  document.getElementById("sdSlider").addEventListener("input", function() {
    sigma = +this.value;
    document.getElementById("sdVal").textContent = this.value;
    updateVisualization();
  });
});
</script>
<section id="reflection" class="level4" data-number="2.0.1.1">
<h4 data-number="2.0.1.1" class="anchored" data-anchor-id="reflection"><span class="header-section-number">2.0.1.1</span> Reflection</h4>
<p>Were you able to replicate the sample based parameters (mean, median, SD, CV%)?</p>
<p>What did you notice when you changed the population SD slider and sampled again?</p>
<p>Assuming a normal distribution (Bell curve) what proportion of the observations are contained between -1 to +1SD units around the mean? What about -2 to +2SD units and like wise -3 to +3SD.</p>
<p>Did you notice anything about the stability and or precision of sample mean and SD estimates when sampling from lower sample sizes e.g.&nbsp;5? (The below interactive visual may help emphasize this relationship)</p>
<p>To best utilise the visualization below,either leave one of the slider values constant while you change the value of the other slider. e.g.&nbsp;you may draw 10 samples with the sample size set to 30 and popluation SD set to 10, then change the sameple size value to 50 draw 10 values, then 5, then 100. You may flip this process around then altering the SD values leaving the sample size set at a constant value.</p>
</section>
</section>
<section id="fig2" class="level3" data-number="2.0.2">
<h3 data-number="2.0.2" class="anchored" data-anchor-id="fig2"><span class="header-section-number">2.0.2</span> Fig2</h3>
<div class="visualization-container">
  <div class="control-group">
    <label>Sample Size: <span id="sampleSizeValue">30</span></label>
    <input type="range" id="sampleSize" min="5" max="100" value="30">
  </div>
  <div class="control-group">
    <label>Population SD: <span id="sdValue">10</span></label>
    <input type="range" id="sd" min="1" max="20" value="10">
  </div>
  <div class="button-group">
    <button id="addData">Draw New Sample</button>
    <button id="clearAll">Clear All</button>
    <button id="toggleCI">Toggle 95% CI</button>
  </div>
  <div id="plot"></div>
</div>

<style>
.visualization-container {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
}

.control-group {
  margin-bottom: 15px;
}

.control-group label {
  display: block;
  margin-bottom: 5px;
}

.control-group input {
  width: 100%;
}

button {
  padding: 8px 16px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-bottom: 10px;
}

button:hover {
  background: #0056b3;
}

.size-line {
    stroke: #666;
    stroke-width: 1;
    stroke-dasharray: 2;
}

.sample-size-text {
  font-size: 12px;
  fill: #666;
}

.button-group {
    margin-bottom: 15px;
    display: flex;
    gap: 10px;
}

.ci-line {
    stroke-width: 2;
}

.ci-line.captured {
    stroke: rgba(70, 130, 180, 0.3);
}

.ci-line.missed {
    stroke: rgba(255, 0, 0, 0.3);
}
</style>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set up dimensions
    const width = 600;
    const height = 300;
    const margin = {top: 20, right: 20, bottom: 30, left: 40};

    // Population parameters
    const trueMean = 50;
    let currentSD = 10;
    let previousSampleSize = 30;
    let showCI = false;

    // Create SVG container
    const svg = d3.select("#plot")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

    // Initial data
    let data = [{time: 0, value: trueMean, sampleSize: 30, sd: currentSD, se: currentSD/Math.sqrt(30)}];
    let sizeChangePoints = [{time: 0, sampleSize: 30, sd: currentSD}];
    let timePoint = 1;

    // Set up scales
    const x = d3.scaleLinear()
        .domain([0, 10])
        .range([margin.left, width - margin.right]);

    const y = d3.scaleLinear()
        .domain([30, 70])
        .range([height - margin.bottom, margin.top]);

    // Add axes
    svg.append("g")
        .attr("class", "x-axis")
        .attr("transform", `translate(0,${height - margin.bottom})`)
        .call(d3.axisBottom(x));

    svg.append("g")
        .attr("transform", `translate(${margin.left},0)`)
        .call(d3.axisLeft(y));

    // Add true mean line
    svg.append("line")
        .attr("x1", margin.left)
        .attr("x2", width - margin.right)
        .attr("y1", y(trueMean))
        .attr("y2", y(trueMean))
        .attr("stroke", "red")
        .attr("stroke-dasharray", "4")
        .attr("stroke-width", 2);

    // Create group for size indicators
    const sizeIndicators = svg.append("g")
        .attr("class", "size-indicators");

    // Create group for confidence intervals
    const ciGroup = svg.append("g")
        .attr("class", "ci-group");

    // Line generator
    const line = d3.line()
        .x(d => x(d.time))
        .y(d => y(d.value));

    // Add the line path
    const path = svg.append("path")
        .datum(data)
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 2)
        .attr("d", line);

    function updateSizeIndicators() {
        // Remove all existing indicators first
        sizeIndicators.selectAll(".size-indicator").remove();

        // Then add new ones
        const lines = sizeIndicators.selectAll(".size-indicator")
            .data(sizeChangePoints);

        const linesEnter = lines.enter()
            .append("g")
            .attr("class", "size-indicator");

        linesEnter.append("line")
            .attr("class", "size-line")
            .attr("y1", margin.top)
            .attr("y2", height - margin.bottom);

        linesEnter.append("text")
            .attr("class", "sample-size-text")
            .attr("y", margin.top - 5)
            .attr("text-anchor", "middle");

        sizeIndicators.selectAll(".size-line")
            .attr("x1", d => x(d.time))
            .attr("x2", d => x(d.time));

        sizeIndicators.selectAll(".sample-size-text")
            .attr("x", d => x(d.time))
            .text(d => `n = ${d.sampleSize}, SD = ${d.sd}`);

        lines.exit().remove();
    }

    function updateConfidenceIntervals() {
        if (!showCI) {
            ciGroup.selectAll("line").remove();
            return;
        }

        const ciLines = ciGroup.selectAll("line")
            .data(data);

        // Enter new CI lines
        ciLines.enter()
            .append("line")
            .attr("class", d => {
                const upperBound = d.value + 1.96 * d.se;
                const lowerBound = d.value - 1.96 * d.se;
                return `ci-line ${(lowerBound <= trueMean && upperBound >= trueMean) ? 'captured' : 'missed'}`;
            })
            .merge(ciLines)
            .attr("x1", d => x(d.time))
            .attr("x2", d => x(d.time))
            .attr("y1", d => y(d.value + 1.96 * d.se))
            .attr("y2", d => y(d.value - 1.96 * d.se));

        ciLines.exit().remove();
    }

    function normalRandom(mean, sd) {
        let u = 0, v = 0;
        while(u === 0) u = Math.random();
        while(v === 0) v = Math.random();
        return mean + sd * Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
    }

    function calculateSampleMean(mean, sd, size) {
        let sum = 0;
        for(let i = 0; i < size; i++) {
            sum += normalRandom(mean, sd);
        }
        return sum / size;
    }

    function updatePoints() {
        const points = svg.selectAll("circle")
            .data(data);

        points.enter()
            .append("circle")
            .merge(points)
            .attr("cx", d => x(d.time))
            .attr("cy", d => y(d.value))
            .attr("r", 4)
            .attr("fill", "steelblue");

        points.exit().remove();
    }

    function clearAll() {
        const sampleSize = +document.getElementById("sampleSize").value;
        const sd = +document.getElementById("sd").value;
        data = [{time: 0, value: trueMean, sampleSize: sampleSize, sd: sd, se: sd/Math.sqrt(sampleSize)}];
        sizeChangePoints = [{time: 0, sampleSize: sampleSize, sd: sd}];
        timePoint = 1;
        previousSampleSize = sampleSize;

        x.domain([0, 10]);
        svg.select(".x-axis").call(d3.axisBottom(x));

        path.datum(data).attr("d", line);
        updatePoints();
        updateSizeIndicators();
        updateConfidenceIntervals();
    }

    document.getElementById("addData").addEventListener("click", function() {
        const sampleSize = +document.getElementById("sampleSize").value;
        const sd = +document.getElementById("sd").value;
        
        const newValue = calculateSampleMean(trueMean, sd, sampleSize);
        const se = sd/Math.sqrt(sampleSize);
        data.push({
            time: timePoint, 
            value: newValue,
            sampleSize: sampleSize,
            sd: sd,
            se: se
        });
        timePoint++;

        x.domain([0, timePoint]);
        svg.select(".x-axis").call(d3.axisBottom(x));

        path.datum(data).attr("d", line);
        updatePoints();
        updateSizeIndicators();
        updateConfidenceIntervals();
    });

    document.getElementById("sampleSize").addEventListener("input", function() {
        const newSize = +this.value;
        document.getElementById("sampleSizeValue").textContent = newSize;
        const currentSD = +document.getElementById("sd").value;
        
        if (timePoint === 1) {
            // If no samples drawn yet, update the initial point
            sizeChangePoints[0] = {
                time: 0,
                sampleSize: newSize,
                sd: currentSD
            };
        } else if (newSize !== previousSampleSize) {
            sizeChangePoints.push({
                time: timePoint - 1,
                sampleSize: newSize,
                sd: currentSD
            });
        }
        previousSampleSize = newSize;
        updateSizeIndicators();
    });

    document.getElementById("sd").addEventListener("input", function() {
        const newSD = +this.value;
        document.getElementById("sdValue").textContent = newSD;
        currentSD = newSD;
        
        const currentSize = +document.getElementById("sampleSize").value;
        if (timePoint === 1) {
            // If no samples drawn yet, update the initial point
            sizeChangePoints[0] = {
                time: 0,
                sampleSize: currentSize,
                sd: newSD
            };
        } else {
            sizeChangePoints.push({
                time: timePoint - 1,
                sampleSize: currentSize,
                sd: newSD
            });
        }
        updateSizeIndicators();
    });

    document.getElementById("clearAll").addEventListener("click", clearAll);

    document.getElementById("toggleCI").addEventListener("click", function() {
        showCI = !showCI;
        updateConfidenceIntervals();
    });

    updatePoints();
    updateSizeIndicators();
});
</script>
</section>
<section id="reflection-1" class="level3" data-number="2.0.3">
<h3 data-number="2.0.3" class="anchored" data-anchor-id="reflection-1"><span class="header-section-number">2.0.3</span> Reflection</h3>
<p>Based on the above interactive visualistion, what did you notice when changing the SD and sample size around?</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Click to expand">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click to expand
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="cell-output-display">
<p><img src="Practical1_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
<p>Looking at the above plot we can see that as sample size increases we see a reduction in a variable called the “standard error”. Likewise we can also see that larger SDs for a given sample size will have larger standard errors.</p>
</section>
<section id="but-what-is-the-standard-error" class="level3" data-number="2.0.4">
<h3 data-number="2.0.4" class="anchored" data-anchor-id="but-what-is-the-standard-error"><span class="header-section-number">2.0.4</span> But what is the standard error?</h3>
<p>The standard error of the mean (SEM) represents the expected variability of sample means if we were to repeatedly draw samples of the same size from the population. We could calculate the SEM by taking the standard deviation of the sample means from the simulation above. However,unfortunatetly in research we often only ever have access to <strong>one</strong> sample to try and estimate a SEM from. Luckily we can sill estimate a SEM for one sample using the below formula</p>
<p><strong>Standard error of the mean = sample SD/ sqrt(N)</strong><br>
where N is the number of participants.</p>
<p>This in a similar fashion to how the sample SD is measure of dispersion/spread of observation around the mean, can be thought of as the level of variability a sample mean with some given sample size and sd would vary around the true population mean on repeated sampling.</p>
</section>
<section id="confidence-intervals" class="level3" data-number="2.0.5">
<h3 data-number="2.0.5" class="anchored" data-anchor-id="confidence-intervals"><span class="header-section-number">2.0.5</span> Confidence intervals</h3>
<p>Perhaps a simpler way to think of the standard error is a measure of confidence we have that our sample mean is reflective of the true population mean. In lower samples with lower number of participants we can be less confident in a sample mean representing the true population mean, whilst in higher sample size studies we can be more confident that the sample reflects the true population mean. One way we highlight this uncertainty/confidence is by using something called confidence intervals.</p>
<p>The simplest confidence interval would be to just use the calculated standard error and add a lower limit and upper limit around the sample mean. For example, lets say you had a mean value of 40, SE of 5, your lower limit would be 35 and upper limit 45.<br>
This would represent a 68% level confidence interval, I want you to have a think about why this might be termed a 68% confidence interval?<br>
<br>
*<strong>Hint:</strong> Think back to the normal distribution and how much the standard deviation tells us about the spread of data.</p>
<p>What is more commonly used however, is a 95% confidence interval which would be calculated by multiplying the SE by 1.96. In our example above this would equate to 95% LL = 40 - (5*1.96=9.8) = 30.2, 95% UL = 40 + (5*1.96 = 9.8) = 49.8.</p>
<p>The interpretation of a 95% confidence interval is that if we were to repeat this sampling process many times and calculate the interval each time, about 95% of these intervals would contain the true population mean. Wider confidence intervals indicate more uncertainty in our estimate, while narrower intervals suggest greater precision. This is why larger sample sizes (which lead to smaller standard errors) result in narrower confidence intervals and more precise estimates of the population mean.</p>
<p>To help visualize this, go back to Figure 2. You will notice a button called “Show Confidence Interval” which will display the 95% confidence interval around each sample mean, illustrating how the precision of our estimates changes with different sample sizes and population standard deviations</p>
</section>
<section id="test-your-learning" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="test-your-learning"><span class="header-section-number">2.1</span> Test your learning</h2>
<p><strong>Question 1</strong></p>
If you calculate a mean from a sample of 100 participants, this mean is:
<div id="radio_SKAFHLFSTD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SKAFHLFSTD" value=""> <span>Always exactly equal to the true population mean</span></label><label><input type="radio" autocomplete="off" name="radio_SKAFHLFSTD" value=""> <span>Always lower than the true population mean</span></label><label><input type="radio" autocomplete="off" name="radio_SKAFHLFSTD" value=""> <span>Not related to the true population mean</span></label><label><input type="radio" autocomplete="off" name="radio_SKAFHLFSTD" value="answer"> <span>An estimate of the true population mean</span></label>
</div>
<p><strong>Question 2</strong></p>
When the population standard deviation increases, what happens to the standard error of the mean?
<div id="radio_WEMVFHKNQH" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_WEMVFHKNQH" value=""> <span>It decreases</span></label><label><input type="radio" autocomplete="off" name="radio_WEMVFHKNQH" value=""> <span>It stays the same</span></label><label><input type="radio" autocomplete="off" name="radio_WEMVFHKNQH" value=""> <span>It becomes zero</span></label><label><input type="radio" autocomplete="off" name="radio_WEMVFHKNQH" value="answer"> <span>It increases</span></label>
</div>
<p><strong>Question 3</strong></p>
<p>A researcher collects vertical jump data from 25 athletes and calculates a 95% confidence interval of [45cm, 55cm]. This means: <select class="webex-select"><option value="blank"></option><option value="">95% of all athletes’ jumps fall between 45cm and 55cm</option><option value="">The true population mean definitely lies between 45cm and 55cm</option><option value="">95% of individual jump heights in this sample fall between 45cm and 55cm</option><option value="answer">If we repeated this sampling process many times, about 95% of the calculated intervals would contain the true population mean</option></select></p>
<p><strong>Question 4</strong></p>
If you have a sample mean of 50 and a standard error of 2, what is the 68% confidence interval?
<div id="radio_SBTNJKCHFX" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_SBTNJKCHFX" value=""> <span>[46, 54]</span></label><label><input type="radio" autocomplete="off" name="radio_SBTNJKCHFX" value=""> <span>[47, 53]</span></label><label><input type="radio" autocomplete="off" name="radio_SBTNJKCHFX" value=""> <span>[49, 51]</span></label><label><input type="radio" autocomplete="off" name="radio_SBTNJKCHFX" value="answer"> <span>[48, 52]</span></label>
</div>
<p><strong>Question 5</strong></p>
Which of the following would NOT reduce the standard error of the mean?
<div id="radio_PCGGXYATUI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PCGGXYATUI" value=""> <span>Increasing the sample size</span></label><label><input type="radio" autocomplete="off" name="radio_PCGGXYATUI" value=""> <span>Reducing measurement error</span></label><label><input type="radio" autocomplete="off" name="radio_PCGGXYATUI" value=""> <span>Using more precise equipment</span></label><label><input type="radio" autocomplete="off" name="radio_PCGGXYATUI" value="answer"> <span>Calculating the median instead of the mean</span></label>
</div>
<p><strong>Question 6</strong></p>
The coefficient of variation (CV%) is 15% for a group of athletes’ sprint times. This indicates:
<div id="radio_OYMHRYIJSA" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_OYMHRYIJSA" value=""> <span>The data varies by exactly 15 seconds</span></label><label><input type="radio" autocomplete="off" name="radio_OYMHRYIJSA" value=""> <span>15% of the data points are outliers</span></label><label><input type="radio" autocomplete="off" name="radio_OYMHRYIJSA" value=""> <span>The confidence interval is 15% wide</span></label><label><input type="radio" autocomplete="off" name="radio_OYMHRYIJSA" value="answer"> <span>The standard deviation is 15% of the mean value</span></label>
</div>


</section>
</section>

</main> <!-- /main -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>